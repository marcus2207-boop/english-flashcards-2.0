story_id,endpoint,table_name,columns,notes
ST-001,/api/auth/login,users,email|password_hash,"Authentication: email+password; Argon2id"
ST-002,/api/admin/users,users,email|nickname|role,"Admin user CRUD and audit"
ST-003,/api/imports,imports,filename|total_rows|error_rows|status,"Import CSV/JSON mapping"
ST-003,/api/imports/{importId}/preview,import_rows,import_id|row_number|english|polish|valid|error_message,"Per-row validation"
ST-003,/api/imports/{importId}/commit,lesson_items,lesson_id|english|polish|example|tags,"Commit import -> create lesson_items"
ST-004,/api/users/{userId}/lessons,lessons,id|owner_user_id|title|description,"Lesson CRUD and listing"
ST-005a,/api/sessions/{sessionId}/answer,session_answers,session_id|question_id|user_answer|is_correct,"Session answers autosave and scoring"
ST-005a,/api/sessions/{sessionId}/progress,sessions,id|user_id|lesson_id|started_at|finished_at|duration_seconds|score,"Session progress/stats"
ST-005a,/api/tts/generate,audio_cache,hash|word|engine|accent|path,"TTS generation flow and cache"
ST-005a,/api/tts/cache/{hash},audio_cache,hash|path|last_accessed_at,"Cached audio lookup"
ST-005b,/api/tts/generate,audio_cache,engine|accent|path,"TTS config & test"
ST-006,/api/sessions/{sessionId}/answer,spaced_repetition,user_id|lesson_item_id|state|last_reviewed_at|next_review_at,"Spaced repetition state transitions"
ST-007,/api/sessions/{sessionId}/answer,session_answers,question_id|user_answer,"Quiz answers"
ST-008,/api/users/{userId}/lessons,lessons,id|title|description,"Student dashboard metrics and lists"
ST-009,/api/admin/exports,exports,requested_by|period|format|status|file_path,"Admin exports and tracking"
ST-009,/api/admin/exports/{exportId}/download,exports,file_path,"Export download"
ST-010,/api/users/{userId}/lessons,lessons,id|owner_user_id|title|description,"Student lesson management (owner edits)"
ST-011,/api/users/{userId},users,id|email|nickname|deleted_at,"Privacy & data deletion; audit logs"
ST-012,/api/tts/generate,audio_cache,accent|engine|path,"TTS accent & test"